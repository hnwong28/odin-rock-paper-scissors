<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>rock-paper-scissors</title>
  </head>
  <body>
    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id="scissors">Scissors</button>
    <div id="results"></div>
  </body>
  <script>
    function getComputerChoice() {
      const randomNumber = Math.floor(Math.random() * 3);

      if (randomNumber === 0) {
        return "rock";
      } else if (randomNumber == 1) {
        return "paper";
      } else {
        return "scissors";
      }
    }

    function playRound(humanChoice, computerChoice) {
      if (computerChoice === humanChoice) {
        return 0;
      } else if (
        (computerChoice === "rock" && humanChoice === "paper") ||
        (computerChoice === "paper" && humanChoice === "scissors") ||
        (computerChoice === "scissors" && humanChoice === "rock")
      ) {
        return 1;
      } else {
        return -1;
      }
    }
    /*
            const rock = document.querySelector("#rock");
            const paper = document.querySelector("#paper");
            const scissors = document.querySelector("#scissors"); */

    let humanScore = 0;
    let computerScore = 0;
    let roundNumber = 0;
    let winner = "";

    const buttons = document.querySelectorAll("button");
    buttons.forEach((button) => {
      button.addEventListener(
        "click",
        () => {
          let humanChoice = button.id;
          let computerChoice = getComputerChoice();
          let roundResult = "";
          roundNumber++;
          console.log(roundNumber);
          const result = playRound(humanChoice, computerChoice);
          if (result === 0) {
            roundResult = `It's a tie`;
          } else if (result === 1) {
            roundResult = `You win, ${humanChoice} beats ${computerChoice}`;
            humanScore++;
          } else {
            roundResult = `You lose, ${computerChoice} beats ${humanChoice}`;
            computerScore++;
          }

          const round = document.createElement("div");
          const humanLog = document.createElement("p");
          humanLog.textContent = `Your choice is ${humanChoice}`;
          const computerLog = document.createElement("p");
          computerLog.textContent = `Computer's choice is ${computerChoice}`;
          const resultLog = document.createElement("p");
          resultLog.textContent = roundResult;
          const currentScore = document.createElement("p");
          currentScore.textContent = `Human: ${humanScore}, computer: ${computerScore}`;
          const finalScoreBoard = document.createElement("p");
          results.appendChild(round);
          round.append(humanLog, computerLog, resultLog, currentScore);
          if (roundNumber == 5) {
            round.appendChild(finalScoreBoard);
            if (humanScore > computerScore) {
              winner = "Human";
            } else if (humanScore < computerScore) {
              winner = "Computer";
            } else {
              winner = "nobody";
            }
          }
          finalScoreBoard.textContent = `
            5 rounds done and the winner is ${winner}`;
        }
        //playRound(humanChoice, computerChoice);
      );
    });

    /*   function playGame() {
              let humanScore = 0;
              let computerScore = 0;

              for (let i = 0; i < 5; i++) {
                let humanSelection = getHumanChoice();
                let computerSelection = getComputerChoice();
                let gameValue = playRound(humanSelection, computerSelection);

                if (gameValue == 1) {
                  humanScore++;
                } else if (gameValue == -1) {
                  computerScore++;
                } else {
                }
                console.log(`${humanScore} vs ${computerScore}`);
              }

              console.log(`
              Final score:
                  YOU : ${humanScore}
                  COMPUTER : ${computerScore}`);

              if (humanScore > computerScore) {
                console.log("YOU WIN");
              } else if (humanScore < computerScore) {
                console.log("YOU LOSE");
              } else {
                console.log("TIED");
              }
            }

            playGame();
            */
  </script>
</html>
